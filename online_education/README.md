**Инструкция по запуску docker-compose.yml**

*Описание сервисов*

web:
- Создает контейнер веб-приложения, используя Dockerfile в текущем каталоге.
- Предоставляет доступ к HTTP-трафику через порт 8000.
- Подключает текущий каталог к контейнеру, чтобы включить горячую перезагрузку во время разработки.
- web сервис запускается после сервиса db.
- Загружает переменные среды из файла .env.

db:
- Использует официальный образ PostgreSQL версии 16.
- Данные сохраняются в именованном томе postgres_data, расположенном по адресу /var/lib/postgresql/data.
- Загружает переменные среды из файла .env для настройки.

celery:
- Создает Celery worker для обработки фоновых задач.
- Подключается к Redis, используя предоставленный REDIS_URL.
- Перезапускается при сбое в обеспечении доступности.
- Зависит от сервисов db и redis.

redis:
- Запускает официальный образ Redis версии 7.4.
- Открывает доступ к серверу Redis через порт 6379.
- Сохраняет данные Redis в локальном каталоге (например, ./redis/data).
- Загружает переменные среды из файла .env

celery-beat:
- Создает другой сервис Celery специально для планировщика beat.
- Выполняется независимо для планирования заданий с заданными интервалами.
- Зависит от сервисов db и redis.

Volumes:
- postgres_data: Сохраняет данные базы данных PostgreSQL.
- static_volume: Используется для обработки статических файлов из приложения, гарантируя, что они не будут потеряны между перезапусками контейнера.

Запуск:

Создайте env-файл:

Убедитесь, что в корневом каталоге создан env-файл с необходимыми переменными среды как для веб-сервисов, так и для сервисов базы данных.

- POSTGRES_DB=
- POSTGRES_USER=
- POSTGRES_PASSWORD=
- DATABASE_HOST=
- DATABASE_PORT=

- EMAIL_HOST=
- EMAIL_PORT=
- EMAIL_HOST_USER=
- EMAIL_HOST_PASSWORD=
- EMAIL_USE_TLS=True
- EMAIL_SENDER=
- EMAIL_USE_SSL=False

Создайте и запустите сервисы:

Выполните следующую команду для создания и запуска всех служб, как определено в файле docker-compose.yml:
docker-compose up --build


**Пояснение к файлу Dockerfile**

Предоставленный файл Dockerfile определяет среду для приложения Python:

- Базовый образ: приложение использует python:3.11.9 в качестве базового образа.
- Установка Poetry: он устанавливает Poetry, менеджер зависимостей для Python.
- Переменные среды: для установки зависимостей непосредственно в контейнер задается значение POETRY_VIRTUALENVS_CREATE=false.
- Рабочий каталог: в качестве рабочего каталога задается значение /code.
- Копирование файлов проекта: копируются pyproject.toml и poetry.lock файлы в контейнере и устанавливает зависимости, не включая корневой пакет.
- Заключительная копия: копирует остальной код приложения в контейнер.
- Команда: указывает команду для запуска сервера Django на порту 8000, что делает его доступным из-за пределов контейнера.
